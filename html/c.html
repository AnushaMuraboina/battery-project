<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Country and State Selector</title>

    
</head>
<body>
    <form>
        <label for="country">Country:</label>
        <select id="country" name="country">
            <option value="">Select Country</option>
        </select>

        <label for="state">State:</label>
        <select id="state" name="state">
            <option value="">Select State</option>
        </select>
    </form>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    const countrySelect = document.getElementById('country');
    const stateSelect = document.getElementById('state');
    const openCageApiKey = 'df5c4b25f49347ab87fc0f4ff6d44cda'; 

    // Function to fetch countries
    const fetchCountries = async () => {
        try {
            const response = await fetch('https://api.opencagedata.com/geocode/v1/json?q=&key=${openCageApiKey}');
            const data = await response.json();
            const countries = data.results[0].components.country;
            populateCountrySelect(countries);
        } catch (error) {
            console.error('Error fetching countries:', error);
        }
    };

    // Function to populate country select
    const populateCountrySelect = (countries) => {
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country;
            option.textContent = country;
            countrySelect.appendChild(option);
        });
    };

    // Function to fetch states
    const fetchStates = async (country) => {
        try {
            const response = await fetch('https://api.opencagedata.com/geocode/v1/json?q=${country}&key=${openCageApiKey}');
            const data = await response.json();
            const states = data.results[0].components.state;
            populateStateSelect(states);
        } catch (error) {
            console.error('Error fetching states:', error);
        }
    };
    // Function to populate state select
    const populateStateSelect = (states) => {
        stateSelect.innerHTML = '<option value="">Select State</option>'; // Clear previous options
        states.forEach(state => {
            const option = document.createElement('option');
            option.value = state;
            option.textContent = state;
            stateSelect.appendChild(option);
        });
    };
    // Event listener for country select change
    countrySelect.addEventListener('change', () => {
        const selectedCountry = countrySelect.value;
        if (selectedCountry) {
            fetchStates(selectedCountry);
        } else {
            stateSelect.innerHTML = '<option value="">Select State</option>';
        }
    });
    // Fetch countries on page load
    fetchCountries();
});
    </script>
</body>
</html>
